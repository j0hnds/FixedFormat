<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<!--
	Application context for TestRecordFactoryBase
-->
<beans>
	<!--  The record factory -->
	<bean id="TestFactory" class="org.opentools.fixedformat.impl.RecordFactoryBase">
		<!-- Set the record identifier -->
		<property name="recordIdentifier" ref="RecordIdentifier" />
		<!-- Set the record formatters -->
		<property name="recordFormats">
			<map>
				<entry key="1" value-ref="HeaderFormatter" />
				<entry key="2" value-ref="DetailFormatter" />
			</map>
		</property>
		<!-- Set the data record templates -->
		<property name="recordDataMap">
			<map>
				<entry key="1" value-ref="HeaderRecord" />
				<entry key="2" value-ref="DetailRecord" />
			</map>
		</property>
	</bean>
	
	<!-- The record identifier to use -->
	<bean id="RecordIdentifier" class="org.opentools.ach.ACHRecordIdentifier" />
	
	<!-- The record format definitions -->
	<bean id="HeaderFormatter" class="org.opentools.fixedformat.impl.RecordBase">
		<property name="populator" ref="BeanPopulator" />
		<property name="fieldDefinitions">
			<list>
				<ref bean="RecordId" />
				<ref bean="HeaderDescription" />
			</list>
		</property>
	</bean>
	<bean id="DetailFormatter" class="org.opentools.fixedformat.impl.RecordBase">
		<property name="populator" ref="BeanPopulator" />
		<property name="fieldDefinitions">
			<list>
				<ref bean="RecordId" />
				<ref bean="DetailDescription" />
				<ref bean="DetailAmount" />
				<ref bean="DetailDate" />
				<ref bean="DetailTime" />
			</list>
		</property>
	</bean>
	
	<!-- The populators the record formatters will use -->
	<bean id="BeanPopulator" class="org.opentools.fixedformat.impl.BeanPopulator" />
	
	<!-- The field definitions we will be using -->
	<bean id="RecordId" class="org.opentools.fixedformat.impl.FieldBase">
		<property name="description" value="The identifier of the record" />
		<property name="length" value="1" />
		<property name="name" value="recordType" />
		<property name="valueCodec" ref="LongCodec" />
	</bean>
	<bean id="HeaderDescription" class="org.opentools.fixedformat.impl.FieldBase">
		<property name="description" value="The header description" />
		<property name="length" value="20" />
		<property name="name" value="description" />
		<property name="valueCodec" ref="StringCodec" />
	</bean>
	<bean id="DetailDescription" class="org.opentools.fixedformat.impl.FieldBase">
		<property name="description" value="The detail description" />
		<property name="length" value="10" />
		<property name="name" value="description" />
		<property name="valueCodec" ref="StringCodec" />
	</bean>
	<bean id="DetailAmount" class="org.opentools.fixedformat.impl.FieldBase">
		<property name="description" value="The detail amount" />
		<property name="length" value="12" />
		<property name="name" value="amount" />
		<property name="valueCodec" ref="CurrencyCodec" />
	</bean>
	<bean id="DetailDate" class="org.opentools.fixedformat.impl.FieldBase">
		<property name="description" value="The detail transaction date" />
		<property name="length" value="4" />
		<property name="name" value="date" />
		<property name="valueCodec" ref="DateCodec" />
	</bean>
	<bean id="DetailTime" class="org.opentools.fixedformat.impl.FieldBase">
		<property name="description" value="The detail transaction time" />
		<property name="length" value="4" />
		<property name="name" value="time" />
		<property name="valueCodec" ref="TimeCodec" />
	</bean>
	
	<!-- Create the codecs we will be using for the records -->
	<bean id="LongCodec" class="org.opentools.fixedformat.impl.LongCodec">
		<property name="justification" value="2" />
		<property name="padCharacter" value="0" />
		<property name="paddable" value="false" />
		<property name="truncatable" value="false" />
	</bean>
	<bean id="StringCodec" class="org.opentools.fixedformat.impl.StringCodec">
		<property name="justification" value="1" />
		<property name="padCharacter" value=" " />
		<property name="paddable" value="true" />
		<property name="truncatable" value="true" />
	</bean>
	<bean id="CurrencyCodec" class="org.opentools.fixedformat.impl.USCurrencyCodec">
		<property name="justification" value="2" />
		<property name="padCharacter" value="0" />
		<property name="paddable" value="true" />
		<property name="truncatable" value="false" />
	</bean>
	<bean id="DateCodec" class="org.opentools.fixedformat.impl.DateTimeCodec">
		<property name="justification" value="1" />
		<property name="padCharacter" value=" " />
		<property name="paddable" value="true" />
		<property name="truncatable" value="false" />
		<property name="formatString" value="MMdd" />
	</bean>
	<bean id="TimeCodec" class="org.opentools.fixedformat.impl.DateTimeCodec">
		<property name="justification" value="1" />
		<property name="padCharacter" value=" " />
		<property name="paddable" value="true" />
		<property name="truncatable" value="false" />
		<property name="formatString" value="HHmm" />
	</bean>
	
	<!-- The data records to use for the content of the records (non-singleton) -->
	<bean id="HeaderRecord" class="org.opentools.fixedformat.impl.test.TestHeaderRecord" singleton="false" />
	<bean id="DetailRecord" class="org.opentools.fixedformat.impl.test.TestDetailRecord" singleton="false" />
		
</beans>